{% extends 'lista.html' %}

{% load static %}
{% block head_list %}
    <!--autocomplet-->
    <link href="{% static 'lib/jquery-ui-1.12.1/jquery-ui.min.css' %}" rel="stylesheet"/>
    <script src="{% static 'lib/jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>
    <!--para fecha-->
    <script src="{% static 'lib/plugins/moment/moment-with-locales.js' %}"></script>
    <script src="{% static 'lib/plugins/tempus/tempusdominus-bootstrap-4.min.js' %}"></script>
    <link href="{% static 'lib/plugins/tempus/tempusdominus-bootstrap-4.min.css' %}" rel="stylesheet"/>

    <link href="{% static 'lib/plugins/bootstrap-touchspin-4.3.0/jquery.bootstrap-touchspin.css' %}" rel="stylesheet"/>
    <script src="{% static 'lib/plugins/bootstrap-touchspin-4.3.0/jquery.bootstrap-touchspin.js' %}"></script>
    <script src="{% static 'horas/horas.js' %}"></script>

    <link href="{% static 'lib/select2-4.0.13/css/select2.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'lib/select2-4.0.13/css/select2-bootstrap4.min.css' %}" rel="stylesheet"/>
    <script src="{% static 'lib/select2-4.0.13/js/select2.min.js' %}"></script>
    <script src="{% static 'lib/select2-4.0.13/js/i18n/es.js' %}"></script>
{% endblock %}

{% block content %}
<body onload="fnCreateTabla(6,6)">
    

<div class="card card-primary card-outline">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-edit"></i>
            {{ titulo }}
        </h3>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-lg-8">
                <div class="card card-secondary">
                    <div class="card-header">
                        <h3 class="card-title">Detalle de actividades</h3>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <div class="form-group">
                            <label>Buscador de equipos</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="buscar" placeholder="ingrese la descripción de equipo "
                                       autocomplete="off" oninput="rinon()">
                                <span class="input-group-append">
                                    <button type="button" class="btn btn-info btn-flat">
                                        <i class="las la-times"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                        <hr>
                        <table class="table table-striped table-bordered table-hover" id="data">
                            <thead>
                            <tr>
                                <th>Eliminar</th>
                                <th>Equipo</th>
                                <th>Orden</th>
                                <th>Operación</th>
                                <th>Descripción</th>
                                <th>Cantidad</th>
                            </tr>
                            </thead>
                            <tbody>

                            </tbody>
                        </table>
                        <script>
                            function calcular(){
                                var valor1 = parseFloat(document.getElementById('idcampo_6').value || 0);
                                var valor2 = parseFloat(document.getElementById('idcampo_12').value || 0);
                                var valor3 = parseFloat(document.getElementById('idcampo_18').value || 0);
                                var valor4 = parseFloat(document.getElementById('idcampo_24').value || 0);
                                var valor5 = parseFloat(document.getElementById('idcampo_30').value || 0);
                                var valor6 = parseFloat(document.getElementById('idcampo_36').value || 0);

                                document.getElementById('totalh').value = valor1+valor2+valor3+valor4+valor5+valor6;
                            }

                            function fnCreateTabla(renglones, columnas){
                                var tblBody = document.getElementById('data').getElementsByTagName('tbody')[0];
                                var renglon = document.createElement('tr');

                                var id=0;

                                for (var ren = 0; ren < renglones; ren++) {
                                    
                                    var renglon = document.createElement("tr");
                                    
                                    for (var col = 0; col < columnas; col++) {

                                        var celda = document.createElement("td");
                                        id++;

                                        var oInput;
                                        var icon;

                                        if (col == 0) {
                                            oInput = document.createElement("button");
                                            oInput.type = "button";
                                            oInput.className = "btn btn-danger btn-xs btn-flat";
                                            oInput.name = "ncampo_"+id;
                                            oInput.id = "idcampo_"+id;                                            
                                            oInput.innerHTML = "Eliminar";
                                            
                                            
                                        }
                                        else if (col == 5) {
                                            oInput = document.createElement("input");
                                            oInput.type = "number";                                            
                                            oInput.className = "form-control";
                                            oInput.name = "ncampo_"+id;
                                            oInput.id = "idcampo_"+id;
                                            oInput.oninput = calcular;
                                                                                                                                                                 
                                        }
                                       
                                        else{
                                            oInput = document.createElement('input');
                                            oInput.type = "text";
                                            oInput.className = "form-control";
                                            oInput.name = "ncampo_"+id;
                                            oInput.id = "idcampo_"+id;
                                            //oInput.value = Math.random();
                                            
                                        }
                                    
                                        celda.appendChild(oInput);
                                        renglon.appendChild(celda);
                                        
                                    }
                                    tblBody.appendChild(renglon);
                                    
                                }

                            }
                        </script>
                    </div>
                    <!-- /.card-body -->
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card card-secondary">
                    <div class="card-header">
                        <h3 class="card-title">Datos de parte de horas</h3>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <div class="form-group">
                            <label>Empleado:</label>
                            {{form.Empleado}}
                        </div>
                        <div class="form-group">
                            <label>Fecha:</label>
                            {{form.fecha}}
                        </div>
                        <div class="form-group">
                            <label>Total:</label>
                            {{form.TotalHoras}}
                        </div>

                    </div>
                    <!-- /.card-body -->
                    <script>
                        /*function calcular(){
                            var valor1 = parseFloat(document.getElementById('idcampo_6').value || 0);
                            var valor2 = parseFloat(document.getElementById('idcampo_12').value || 0);
                            var valor3 = parseFloat(document.getElementById('campana').value);

                            document.getElementById('totalh').value = valor1+valor2+valor3;
                        }*/
               
                    </script>
                </div>
            </div>
        </div>

    </div>
    <div class="card-footer">
        <a class="btn btn-primary btn-flat " id="btnText">
            <i class="las la-save"></i> Guardar Registro
        </a>
        <a href="" class="btn btn-succes">
            <i class="las la-times"></i> Cancelar
        </a>
    </div>
    <!-- /.card -->
</div>
</body>
{% endblock %}